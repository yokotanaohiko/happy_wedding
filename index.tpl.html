<!DOCTYPE html>
<html>
  <head>
    <title>マカロン結婚式記念サイト</title>
    <meta http-equiv="Content-Tyep" content="text/html" charset="UTF-8">
    <!-- Bootstrap core CSS -->
    
    <link rel="stylesheet" href="static/css/index.css">
    <link href="static/css/bootstrap.min.css" rel="stylesheet">
    <!--
    <link rel="stylesheet" type="text/css" href="static/css/bootstrap.min.css">
    <script type="text/javascript" src="static/js/bootstrap.min.js"></script>
    -->
    <script src="static/js/jquery-2.1.1.js"></script>
    <script>
      $(document).ready(function(){
          var sw = 1;
          $('div.fuchi').append("<div id='glayLayer'></div><div id='overLayer'></div>");
          $("#glayLayer").click(function(){
            });

          // 最初の画像を出す
          var image_num = 0;
          var last_showed = 0;
          $("#overLayer").show().html("<img src='"+$("li.current-pic a[id='"+image_num+"']").attr("href")+"' />");
          $("li.current-pic a[id='"+image_num+"'] img").addClass('border');
          $("#overLayer").css('opacity',0)
          $("#overLayer").fadeTo(2800, 1);
          $("#overLayer").fadeTo(2800, 0);
          
          image_num ++;

          // 画像のスライドショー
          setInterval(function(){
            if(sw == 0){return false;}
            if(image_num >= {{num}}){image_num = 0;}
            $("li.current-pic a[id='"+last_showed+"'] img").removeClass('border');
            $("li.current-pic a[id='"+image_num+"'] img").addClass('border');
            console.log($("#overLayer").css('opacity'))
            $("#overLayer").css('opacity',0)
            $("#overLayer").show().html("<img src='"+$("li.current-pic a[id='"+image_num+"']").attr("href")+"' alt='ダミー画像' />");
            $("#overLayer").fadeTo(2800, 1);
            $("#overLayer").fadeTo(2800, 0);
            last_showed = image_num;
            image_num ++;
            },6000);

          $("li.current-pic a").click(function(){
            // $('#glayLayer').show();
            // $("#overLayer").show().html("<img src='"+$(this).attr("href")+"' />");
            console.log($(this).attr('id'));
            image_num = $(this).attr('id');
            return false;
            });


      });
    </script>
  </head>
  <body>
    <!-- Fixed navbar -->
    <nav class="navbar navbar-inverse navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="/">Celebration for makaron's wedding!</a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav navbar-right">
            <li class="active"><a href="/">Home</a></li>
            <li><a href="pallet">管理画面</a></li>
        </div><!--/.nav-collapse -->
      </div>
    </nav>
    
    <div class="cantainer">
      <div class="jumbotron">
        <div class="curtain">
          <div class="fuchi">
            <ul class="pic_list">
              {% for ii in range(num) %}
              <li class="current-pic"><a href="/images/{{ images[ii] }}" id="{{ii}}"><img src="thumbnail/{{ images[ii] }}" alt="イメージサンプル"></a></li>
              {% endfor %}
            </ul>
          </div>
        </div>

        <h2>このサイトの説明</h2>
        <p>ピース画像を使って、ベース画像を組み立てます。組み立てる際には、ピース画像のうち、ベース画像の一部分に最も近い色合いの画像が選ばれます。もし、色合いが近い画像が無い場合は、ダミーの画像が代わりに使用されます。</p>
        <p>ベース画像とピース画像は、管理画面からアップロードすることができます。</p>
      </div>
    </div>
    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="static/js/bootstrap.min.js"></script>
  </body>
</html>
